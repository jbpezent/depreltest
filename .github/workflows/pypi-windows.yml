name: pypi-windows


on:
  workflow_dispatch:

jobs:
 build:
    strategy:
       fail-fast: false
       matrix:
        platform: [windows-latest]
        python-version: ["3.8","3.9"]
        compiler: ["clang-cl"]

    runs-on: ${{ matrix.platform }}

    steps:

      
      - uses: actions/checkout@v3
        with:
          submodules: true

      #- uses: ilammy/msvc-dev-cmd@v1
      #  with:
      #    arch: x86_64

      - name: Fake Work
        run: copy src/main.cpp src/main.cpp${{ matrix.python-version }}

      - name: 'Upload Test'
        uses: actions/upload-artifact@v3
        with:
          name: dist ${{ matrix.python-version }}
          path: src/main.cpp${{ matrix.python-version }}
          retention-days: 1

 upload:
    needs: build
    strategy:
       fail-fast: false
       matrix:
        platform: [ubuntu-latest]
        python-version: ["3.9"]
        compiler: ["clang-13"]
    runs-on: ${{ matrix.platform }}

    steps:

        #- name: Make Wheel Directory
        #  run: mkdir wheels/

        - uses: actions/download-artifact@v3
        - name: Display structure of downloaded files
          run: ls -R
